<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Din치mico con Login</title>
    <!-- Usamos el CDN de Tailwind para el dise침o responsivo y moderno -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Cargamos el CDN de Socket.IO para la funcionalidad de chat en tiempo real -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>

    <style>
        /* Estilo para asegurar que la aplicaci칩n ocupe la altura completa del viewport */
        .chat-container {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            width: 100%;
        }
    </style>
</head>

<body class="bg-gray-100 font-sans">

    <!-- 1. VISTA DE INICIO DE SESI칍N (Inicialmente visible) -->
    <div id="login-view" class="chat-container flex flex-col items-center justify-center">
        <div class="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-sm text-center border border-gray-200">
            <h2 class="text-3xl font-extrabold text-blue-600 mb-6">游녦 Ingresa al Chat</h2>
            
            <label for="usernameInput" class="block text-left mb-2 text-md font-medium text-gray-700">Tu Nombre de Usuario</label>
            <input type="text" id="usernameInput" name="usernameInput"
                class="w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition duration-150"
                placeholder="Escribe un nombre 칰nico" required />
            
            <button onclick="handleLogin()"
                class="mt-6 w-full px-6 py-3 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 transition duration-150 shadow-lg transform hover:scale-[1.02] focus:outline-none focus:ring-4 focus:ring-blue-300">
                Entrar al Chat
            </button>
            <p id="error-message" class="text-red-500 mt-3 text-sm hidden">游뚿 Por favor, introduce un nombre de usuario v치lido.</p>
        </div>
    </div>

    <!-- 2. VISTA PRINCIPAL DEL CHAT (Inicialmente oculta) -->
    <div id="chat-view" class="chat-container hidden">
        <div class="w-full max-w-md bg-white rounded-2xl shadow-xl flex flex-col h-[90vh] md:h-[80vh] border border-gray-200">
            
            <!-- Header -->
            <div class="bg-blue-600 text-white text-center py-4 rounded-t-2xl shadow-md">
                <h1 class="text-xl font-bold">游눫 Sala de Chat Socket.IO</h1>
                <!-- Mostrar el nombre de usuario din치mico -->
                <p class="text-sm mt-1" id="current-user-display">Conectado como: ...</p>
            </div>
            
            <!-- Mensajes Container -->
            <div id="messages" class="flex-1 overflow-y-auto p-4 space-y-3">
                <!-- Los mensajes se insertar치n aqu칤 por JavaScript -->
            </div>
            
            <!-- Input Form -->
            <form onsubmit="sendMessage(event)" class="flex border-t p-4 bg-gray-50 rounded-b-2xl">
                <input id="messageInput" type="text" placeholder="Escribe un mensaje..."
                    class="flex-1 border-2 border-gray-300 rounded-xl px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-150"
                    autocomplete="off" required />
                <button type="submit"
                    class="ml-3 bg-blue-600 text-white font-semibold px-6 py-3 rounded-xl hover:bg-blue-700 transition duration-150 shadow-md transform hover:scale-[1.02] focus:outline-none focus:ring-4 focus:ring-blue-300">
                    Enviar
                </button>
            </form>
        </div>
    </div>

    <!-- Enlaza el archivo de l칩gica JavaScript -->
    <script src="./chat.js"></script>
</body>

</html>
