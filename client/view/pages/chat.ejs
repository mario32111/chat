<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat App</title>
    <link href="/css/output.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>

<body class="min-h-screen w-full">

    <header>
    </header>

    <main>
        <div class="flex justify-center items-center min-h-screen w-full">
            <div class="w-full max-w-md bg-white rounded-2xl shadow-lg flex flex-col h-[80vh]">
                <!-- Header -->
                <div class="bg-blue-600 text-white text-center py-3 rounded-t-2xl">
                    <h1 class="text-lg font-semibold">ðŸ’¬ Chat Global</h1>
                </div>
                <!-- Mensajes -->
                <div id="messages" class="flex-1 overflow-y-auto p-4 space-y-3">
                    <div class="flex justify-start">
                        <div class="bg-gray-200 text-gray-800 px-4 py-2 rounded-xl">
                            Hola! Bienvenido al chat ðŸ˜ƒ
                        </div>
                    </div>
                    <div class="flex justify-end">
                        <div class="bg-blue-500 text-white px-4 py-2 rounded-xl">
                            Â¡Gracias!
                        </div>
                    </div>
                </div>
                <!-- Input -->
                <div class="flex border-t p-3">
                    <input type="text" placeholder="Escribe un mensaje..."
                        class="flex-1 border rounded-xl px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300" />
                    <button type="submit" onclick="sendMessage()"
                        class="ml-2 bg-blue-600 text-white px-4 py-2 rounded-xl hover:bg-blue-700 transition">
                        Enviar
                    </button>
                <div/>
            </div>
        </div>
    </main>

    <footer>
    </footer>

</body>

</html>

<script>
    // **NOTA:** Esto es un ejemplo conceptual. No funcionarÃ¡ con tu `cliente` de net.
    // NecesitarÃ­as implementar Socket.IO o WebSockets en el servidor y en el cliente.
    function sendMessage() {

        // 1. Obtener el input
        const inputElement = document.querySelector('input[type="text"]');
        const message = inputElement.value.trim();

        if (message) {
            console.log('Mensaje a enviar:', message);
            fetch('/newMessage', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ message })
            }).then(response => {
                if (response.ok) {
                    console.log('Mensaje enviado al servidor');
                } else {
                    console.error('Error al enviar el mensaje');
                }
            }).catch(error => {
                console.error('Error en la solicitud:', error);
            });
            inputElement.value = ''; // Limpiar el input
        }
    }
</script>